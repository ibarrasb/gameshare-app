(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,n){},61:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(32),s=n.n(c),r=(n(39),n(13)),o=n(5),i=n.n(o),l=n(11),j=n(3),u=n(12),b=n.n(u);var d=function(e){var t=Object(a.useState)(!1),n=Object(j.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(!1),o=Object(j.a)(r,2),u=o[0],d=o[1],h=Object(a.useState)(!1),O=Object(j.a)(h,2),p=O[0],m=O[1],x=Object(a.useState)([]),v=Object(j.a)(x,2),f=v[0],g=v[1],w=Object(a.useState)([]),k=Object(j.a)(w,2),y=k[0],N=k[1];return Object(a.useEffect)((function(){if(e){var t=function(){var t=Object(l.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.get("/user/infor",{headers:{Authorization:e}});case 3:n=t.sent,g(n.data.name.split(" ")[0]),N(n.data.consoles),s(!0),1===n.data.role?d(!0):d(!1),console.log(n.data),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),alert(t.t0.response.data.msg);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(){return t.apply(this,arguments)}}();t()}}),[e]),{isLogged:[c,s],isAdmin:[u,d],callback:[p,m],name:[f,g],consoles:[y,N]}},h=n(1),O=Object(a.createContext)(),p=function(e){var t=e.children,n=Object(a.useState)(!1),c=Object(j.a)(n,2),s=c[0],r=c[1],o=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/user/refresh_token");case 2:t=e.sent,r(t.data.accesstoken);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){localStorage.getItem("firstLogin")&&o()}),[]);var u={token:[s,r],UserAPI:d(s)};return Object(h.jsx)(O.Provider,{value:u,children:t})},m=n(2),x=n(15),v=n(9);n(61);var f=function(){var e=Object(a.useState)({email:"",password:""}),t=Object(j.a)(e,2),n=t[0],c=t[1],s=function(e){var t=e.target,a=t.name,s=t.value;c(Object(v.a)(Object(v.a)({},n),{},Object(x.a)({},a,s)))},o=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b.a.post("/user/login",Object(v.a)({},n));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/home",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"login-page",children:Object(h.jsxs)("form",{onSubmit:o,children:[Object(h.jsx)("h1",{className:"main-title",children:"Gameshare"}),Object(h.jsx)("h2",{children:"Login"}),Object(h.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:n.email,onChange:s}),Object(h.jsx)("input",{type:"password",name:"password",required:!0,autoComplete:"on",placeholder:"Password",value:n.password,onChange:s}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("button",{type:"submit",children:"Login"}),Object(h.jsx)(r.b,{to:"/register",children:"Register"})]})]})})},g=n(34);var w=function(){var e=Object(a.useState)({name:"",email:"",password:"",consoles:[]}),t=Object(j.a)(e,2),n=t[0],c=t[1],s=function(e){var t=e.target,a=t.name,s=t.value;c(Object(v.a)(Object(v.a)({},n),{},Object(x.a)({},a,s)))},o=function(e){var t=e.target.value;n.consoles.includes(t)?c(Object(v.a)(Object(v.a)({},n),{},{consoles:n.consoles.filter((function(e){return e!==t}))})):c(Object(v.a)(Object(v.a)({},n),{},{consoles:[].concat(Object(g.a)(n.consoles),[t])}))},u=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b.a.post("/user/register",Object(v.a)({},n));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"login-page",children:Object(h.jsxs)("form",{onSubmit:u,children:[Object(h.jsx)("h1",{className:"main-title",children:"Gameshare"}),Object(h.jsx)("h2",{children:"Register"}),Object(h.jsx)("input",{type:"text",name:"name",required:!0,placeholder:"Name",value:n.name,onChange:s}),Object(h.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:n.email,onChange:s}),Object(h.jsx)("input",{type:"password",name:"password",required:!0,autoComplete:"on",placeholder:"Password",value:n.password,onChange:s}),Object(h.jsxs)("div",{className:"check-box",children:[Object(h.jsxs)("label",{className:"check-name",children:[Object(h.jsx)("input",{className:"check-name",type:"checkbox",name:"consoles",value:"Xbox",checked:n.consoles.includes("Xbox"),onChange:o}),"Xbox"]}),Object(h.jsxs)("label",{className:"check-name",children:[Object(h.jsx)("input",{type:"checkbox",name:"consoles",value:"PlayStation",checked:n.consoles.includes("PlayStation"),onChange:o}),"PlayStation"]}),Object(h.jsxs)("label",{className:"check-name",children:[Object(h.jsx)("input",{type:"checkbox",name:"consoles",value:"PlayStation",checked:n.consoles.includes("Nintendo"),onChange:o}),"Nintendo"]})]}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("button",{type:"submit",children:"Register"}),Object(h.jsx)(r.b,{to:"/",children:"Login"})]})]})})};var k=function(){var e=Object(a.useContext)(O),t=Object(j.a)(e.UserAPI.isLogged,1)[0],n=Object(j.a)(e.UserAPI.name,1)[0],c=Object(j.a)(e.UserAPI.consoles,1)[0];return Object(h.jsxs)("div",{children:[Object(h.jsxs)("h1",{children:[" ",t?Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("div",{children:"Welcome"}),Object(h.jsx)("div",{children:n})]}):""]}),Object(h.jsx)("div",{children:c.map((function(e,t){return Object(h.jsx)("h1",{children:e},t)}))})]})};var y=function(){return Object(h.jsx)("div",{children:"404 | Not Found"})};var N=function(){var e=Object(a.useContext)(O),t=Object(j.a)(e.UserAPI.isLogged,1)[0];return Object(h.jsxs)(m.c,{children:[Object(h.jsx)(m.a,{path:"/home",exact:!0,component:k}),Object(h.jsx)(m.a,{path:"/",exact:!0,component:t?y:f}),Object(h.jsx)(m.a,{path:"/register",exact:!0,component:t?y:w}),Object(h.jsx)(m.a,{path:"*",exact:!0,component:y})]})};n(70);var S=function(){var e=Object(a.useContext)(O),t=Object(j.a)(e.UserAPI.isLogged,1)[0],n=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/user/logout");case 2:localStorage.clear(),window.location.href="/";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{children:t?Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("div",{className:"dv1",children:"Gameshare"}),Object(h.jsx)("div",{className:"dv2",children:Object(h.jsx)(r.b,{to:"/",onClick:n,children:"Logout"})})]}):""})};var C=function(){return Object(h.jsx)(p,{children:Object(h.jsx)(r.a,{children:Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(S,{}),Object(h.jsx)(N,{})]})})})};s.a.render(Object(h.jsx)(C,{}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.594f725d.chunk.js.map